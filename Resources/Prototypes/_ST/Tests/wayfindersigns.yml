# SPDX-FileCopyrightText: 2025 AftrLite
#
# SPDX-License-Identifier: LicenseRef-Wallening

- type: entity
  id: StellarWayfinderSign
  parent: BaseStructure
  name: wayfinder sign
  description: A sign for holding direction labels.
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _ST/Items/Misc/wayfinderlabels.rsi
    offset: 0, 0.5
    layers:
      - state: base
        sprite: _ST/Tileset/Machines/wayfindersign.rsi
      - state: sci
        offset: 0, 0.1545
        shader: unshaded
        visible: false
        map: ["enum.WayfinderSignLayers.Slot1Base"]
      - state: sci
        offset: 0, 0.1545
        shader: unshaded
        visible: false
        map: ["enum.WayfinderSignLayers.Slot1Arrow"]
      - state: sci
        offset: 0, -0.064
        shader: unshaded
        visible: false
        map: ["enum.WayfinderSignLayers.Slot2Base"]
      - state: sci
        offset: 0, -0.064
        shader: unshaded
        visible: false
        map: ["enum.WayfinderSignLayers.Slot2Arrow"]
      - state: sci
        offset: 0, -0.281
        shader: unshaded
        visible: false
        map: ["enum.WayfinderSignLayers.Slot3Base"]
      - state: sci
        offset: 0, -0.281
        shader: unshaded
        visible: false
        map: ["enum.WayfinderSignLayers.Slot3Arrow"]
  - type: Icon
    sprite: _ST/Tileset/Machines/wayfindersign.rsi
    state: base
  - type: Physics
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "0.4,0.50,-0.4,0.2"
        density: 190
        mask:
        - MachineMask
        layer:
        - MidImpassable
        - LowImpassable
        - BulletImpassable
  - type: Repairable
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallic
  - type: RCDDeconstructable
    cost: 4
    delay: 2
    fx: EffectRCDDeconstruct2
  - type: Appearance
  - type: WayfinderSignVisuals
  - type: ItemSlots
    slots:
      slot1:
        whitelist:
          components:
          - WayfinderLabel
      slot2:
        whitelist:
          components:
          - WayfinderLabel
      slot3:
        whitelist:
          components:
          - WayfinderLabel
  - type: ContainerContainer
    containers:
      slot1: !type:ContainerSlot
      slot2: !type:ContainerSlot
      slot3: !type:ContainerSlot
  - type: WayfinderSign
  - type: Lock
    locked: false
  - type: AccessReader
    access: [["Command"], ["Engineering"], ["Janitor"]]
  - type: Construction
    graph: StellarWayfinderSign
    node: StellarWayfinderSign

- type: entity
  id: StellarWayfinderSignFrame
  parent: BaseStructure
  name: wayfinder sign frame
  description: A partially-built wayfinder sign.
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _ST/Tileset/Machines/wayfindersign.rsi
    state: frame
    offset: 0, 0.5
  - type: Icon
    sprite: _ST/Tileset/Machines/wayfindersign.rsi
    state: frame
  - type: Physics
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "0.4,0.50,-0.4,0.2"
        density: 190
        mask:
        - MachineMask
        layer:
        - MidImpassable
        - LowImpassable
        - BulletImpassable
  - type: Repairable
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallic
  - type: RCDDeconstructable
    cost: 2
    delay: 2
    fx: EffectRCDDeconstruct2
  - type: Construction
    graph: StellarWayfinderSign
    node: StellarWayfinderSignFrame

- type: entity
  parent: BaseItem
  abstract: true
  id: WayfinderLabelBase
  description: A directional label with a rotatable arrow, meant for use on a wayfinder sign.
  components:
  - type: Sprite
    sprite: _ST/Items/Misc/wayfinderlabels.rsi
    noRot: true
    layers:
    - state: sci
      map: ["enum.WayfinderLabelVisuals.Base"]
    - state: arrow
      map: ["enum.WayfinderLabelVisuals.Arrow"]
  - type: Appearance
  - type: WayfinderLabelVisuals
  - type: WayfinderLabel
    baseSprite:
      sprite: _ST/Items/Misc/wayfinderlabels.rsi
    arrowSprite:
      sprite: _ST/Items/Misc/wayfinderlabels.rsi
      state: arrow

# -------------------------------------------------------------

- type: entity
  name: bar sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelBar
  components:
  - type: WayfinderLabel
    baseSprite:
      state: bar

- type: entity
  name: botany sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelBotany
  components:
  - type: WayfinderLabel
    baseSprite:
      state: botany

- type: entity
  name: bridge sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelBridge
  components:
  - type: WayfinderLabel
    baseSprite:
      state: bridge

- type: entity
  name: cafeteria sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelCafe
  components:
  - type: WayfinderLabel
    baseSprite:
      state: cafe

- type: entity
  name: cargo sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelCargo
  components:
  - type: WayfinderLabel
    baseSprite:
      state: cargo

- type: entity
  name: chemistry sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelChemistry
  components:
  - type: WayfinderLabel
    baseSprite:
      state: chem

- type: entity
  name: cryosleep sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelCryo
  components:
  - type: WayfinderLabel
    baseSprite:
      state: cryo

- type: entity
  name: dormitories sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelDorms
  components:
  - type: WayfinderLabel
    baseSprite:
      state: dorms

- type: entity
  name: engineering sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelEngineering
  components:
  - type: WayfinderLabel
    baseSprite:
      state: engi

- type: entity
  name: head of personnel sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelHeadOfPersonnel
  components:
  - type: WayfinderLabel
    baseSprite:
      state: hop

- type: entity
  name: library sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelLibrary
  components:
  - type: WayfinderLabel
    baseSprite:
      state: lbry

- type: entity
  name: medical sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelMedical
  components:
  - type: WayfinderLabel
    baseSprite:
      state: med

- type: entity
  name: science sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelScience
  components:
  - type: WayfinderLabel
    baseSprite:
      state: sci

- type: entity
  name: security sign label
  parent: WayfinderLabelBase
  id: WayfinderLabelSecurity
  components:
  - type: WayfinderLabel
    baseSprite:
      state: sec
